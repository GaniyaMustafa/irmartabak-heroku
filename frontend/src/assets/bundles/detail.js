(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{64:function(t,a,i){"use strict";i.r(a);var s={name:"Detail",data:function(){return{giverating:{ip:"",score:null,user:null,rating:null},martabakdata:[],ratingmartabak:[],ratinguser:[],errored:!1,loading:!0,currentM:null,slug:this.$route.params.name,ratingdata:[],checked:null}},components:{modal:function(){return i.e(3).then(i.bind(null,74))},menuslider:function(){return i.e(2).then(i.bind(null,73))}},created:function(){this.getData()},computed:{already_rate:function(){return this.giverating.ip==this.ratingip?this.checked=!0:this.checked=!1,this.checked}},methods:{getData:function(){var t=this;this.$axios.get("https://api.ipify.org/?format=json").then((function(a){t.giverating.ip=a.data.ip})),this.$axios.get("/api/martabak/").then((function(a){t.martabakdata=a.data.filter((function(a){return a.slug.includes(t.slug)}))})),this.$axios.get("/api/rating/").then((function(a){t.ratingmartabak=a.data})),this.slug=this.$route.params.name,this.$axios.get("/api/userrating/").then((function(a){t.ratinguser=a.data})).catch((function(a){console.log(a),t.errored=!0})).finally((function(){t.giverating.ip==t.ratingip?t.checked=!0:t.checked=!1,t.loading=!1}))},rate:function(){this.$axios.post("/api/userrating/",this.giverating).then((function(t){})).catch((function(t){console.log(t.response)})),location.reload()}},watch:{$route:function(t,a){this.getData(),this.ratingip=""}}},e=i(1),n=Object(e.a)(s,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"detail"},[i("section",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[t._m(0),t._v(" "),t._m(1)]),t._v(" "),i("vue-page-transition",{attrs:{name:"fade-in-up"}},t._l(t.martabakdata,(function(a){return i("section",{key:a.id,attrs:{id:"detailmartabak"}},[i("div",{staticClass:"container-fluid row p-0 m-0 mb-5"},[i("img",{staticClass:"thumbnail fit-cover",attrs:{src:a.image,alt:a.name}})]),t._v(" "),i("div",{staticClass:"container-fluid row p-0 m-0 my-5"},t._l(t.ratingmartabak,(function(s){return i("div",{key:s.average},[t._l(t.ratinguser,(function(a){return i("div",{key:a.id},[a.rating==s.id?i("div",[i("div",{attrs:{rip:t.ratingip=a.ip}}),t._v(" "),i("div",{attrs:{ur:t.userrating=a.score}})]):t._e()])})),t._v(" "),s.object_id==a.id?i("div",{staticClass:"col-10 col-md-8 mx-auto my-auto p-0",attrs:{cm:t.currentM=a.id}},[i("div",{attrs:{rid:t.giverating.rating=s.id}},[i("p",{staticClass:"display-5 mt-5 mb-0"},[t._v(t._s(a.name))]),t._v(" "),i("star-rating",{staticClass:"my-3",attrs:{rating:parseFloat(s.average),"read-only":!0,increment:.1,"star-size":32}}),t._v(" "),i("div",{staticClass:"h2 my-3"},[i("p",{staticClass:"inline-block text-dark mr-3"},[t._v(t._s("Rp. "+a.price))])]),t._v(" "),i("div",[i("button",{staticClass:"btn btn-primary btn-lg px-5 py-3",attrs:{"data-toggle":"modal","data-target":"#buymethod"}},[t._v("\n            Pesan Sekarang\n          ")]),null!==t.already_rate?i("button",{staticClass:"btn btn-dark btn-lg px-5 py-3",attrs:{"data-toggle":"modal","data-target":"#startrating"}},[t._v("\n            Berikan Rating\n          ")]):t._e()]),t._v(" "),i("modal",{attrs:{id:"startrating",title:"Berikan Rating"}},[t.already_rate?t._e():i("div",{staticClass:"row p-2 m-0 mb-3"},[i("star-rating",{attrs:{increment:.5,"star-size":46,"text-class":"custom-text"},on:{"rating-selected":function(a){return t.rate()}},model:{value:t.giverating.score,callback:function(a){t.$set(t.giverating,"score",a)},expression:"giverating.score"}})],1),t._v(" "),t.already_rate?i("div",{staticClass:"row p-2 m-0"},[i("star-rating",{attrs:{rating:t.userrating,"read-only":!0,increment:.5,"star-size":46}})],1):t._e(),t._v(" "),t.already_rate?i("div",{staticClass:"p-2 mt-2 mb-3"},[t._v("Kamu telah memberikan rating "+t._s(t.userrating+" untuk "+a.name))]):t._e()]),t._v(" "),i("modal",{attrs:{id:"buymethod",title:"Pilih Layanan Pemesanan"}},[i("div",{staticClass:"row m-0"},[i("div",{staticClass:"col-md-6 p-5 my-auto"},[i("a",{attrs:{href:"https://gofood.co.id/bahasa/bandung/restaurant/insinyur-martabak-ir-martabak-cijerah-01b2ca13-eecb-4c5a-8835-207ba3e8e59f"}},[i("img",{staticClass:"img-fluid",attrs:{src:"/static/img/gofood.png",alt:""}})])]),t._v(" "),i("div",{staticClass:"col-md-6 p-5 my-auto"},[i("a",{attrs:{href:"https://food.grab.com/id/id/restaurant/insinyur-martabak-ir-martabak-babakan-sari-delivery/IDGFSTI000013nr"}},[i("img",{staticClass:"img-fluid",attrs:{src:"/static/img/grabfood.png",alt:""}})])])])])],1),t._v(" "),s.object_id==a.id?i("div",{staticClass:"my-5 px-0 py-4 px-md-4"},[i("label",{staticClass:"lead3"},[t._v("Nama")]),t._v(" "),i("p",[t._v(t._s(a.name))]),t._v(" "),i("label",{staticClass:"lead3"},[t._v("Harga")]),t._v(" "),i("p",[t._v(t._s("Rp "+a.price))]),t._v(" "),i("label",{staticClass:"lead3"},[t._v("Rating")]),t._v(" "),i("p",[t._v(t._s(parseFloat(s.average)+"/5"))]),t._v(" "),i("label",{staticClass:"lead3"},[t._v("Ukuran Tersedia")]),t._v(" "),i("p",[t._v(t._s(a.Size))]),t._v(" "),i("label",{staticClass:"lead3"},[t._v("Deskripsi")]),t._v(" "),i("p",[t._v(t._s(a.deskripsi))])]):t._e()]):t._e()],2)})),0)])})),0),t._v(" "),i("menuslider",{staticClass:"py-3 py-md-5",attrs:{currentMartabak:t.currentM}})],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"container-fluid row p-0 m-0 mb-5"},[a("div",{staticClass:"skeleton-thumbnail"})])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"col-10 col-md-8 mx-auto my-auto p-0"},[i("p",{staticClass:"display-5 mt-5 mb-0 skeleton-txt"},[t._v("Martabak Super")]),t._v(" "),i("div",{staticClass:"h2 my-3"},[i("p",{staticClass:"inline-block mr-3 skeleton-txt"},[t._v("Rp. 30000")])]),t._v(" "),i("div",[i("button",{staticClass:"btn btn-skeleton btn-lg px-5 py-3",attrs:{"data-toggle":"modal","data-target":"#buymethod"}},[t._v("\n        Pesan Sekarang\n      ")]),i("button",{staticClass:"btn btn-skeleton btn-lg px-5 py-3"},[t._v("\n        Berikan Rating\n      ")])]),t._v(" "),i("div",{staticClass:"my-5 px-0 py-4 px-md-4"},[i("label",{staticClass:"lead3 skeleton-txt"},[t._v("Rating")]),t._v(" "),i("label",{staticClass:"lead3 skeleton-txt"},[t._v("Ukuran Tersedia")]),t._v(" "),i("p",{staticClass:"skeleton-txt"},[t._v("Small")]),t._v(" "),i("label",{staticClass:"lead3 skeleton-txt"},[t._v("Deskripsi")])])])}],!1,null,null,null);a.default=n.exports}}]);